// ---------------- Floating hearts (global) ---------------- function spawnHeart(){ const heart = document.createElement('div'); heart.className = 'heart'; heart.textContent = '❤️'; const x = Math.random() * window.innerWidth; heart.style.setProperty('--x', x + 'px'); heart.style.left = x + 'px'; heart.style.fontSize = (Math.random()*20 + 12) + 'px'; heart.style.animationDuration = (Math.random()*3 + 3) + 's'; document.body.appendChild(heart); setTimeout(()=> heart.remove(), 7000); } setInterval(spawnHeart, 350); // ---------------- Runaway "No" button (mobile + desktop) ---------------- (function () { const noBtn = document.getElementById('noBtn'); const yesBtn = document.getElementById('yesBtn'); const group = document.querySelector('.btn-group'); const popup = document.getElementById('popup'); if (!noBtn || !group) return; // Move No button to a safe random position inside group, // avoiding overlap with Yes button. function moveNoButton() { const groupRect = group.getBoundingClientRect(); const noRect = noBtn.getBoundingClientRect(); const yesRect = yesBtn ? yesBtn.getBoundingClientRect() : null; const padding = 8; // padding from edges // Available area inside the group const maxX = Math.max(20, groupRect.width - noRect.width - padding * 2); const maxY = Math.max(20, groupRect.height - noRect.height - padding * 2); // If container is too small, expand it a bit if (maxY < 20) { group.style.minHeight = Math.max(140, noRect.height * 2 + 40) + 'px'; } // Try several random positions to avoid the Yes button let tries = 0, x = 0, y = 0; while (tries < 20) { x = padding + Math.random() * maxX; y = padding + Math.random() * maxY; // Candidate rect in viewport coords (for overlap check) const cand = { left: groupRect.left + x, top: groupRect.top + y, right: groupRect.left + x + noRect.width, bottom: groupRect.top + y + noRect.height }; const overlapsYes = yesRect && !(cand.right < yesRect.left || cand.left > yesRect.right || cand.bottom < yesRect.top || cand.top > yesRect.bottom); if (!overlapsYes) break; tries++; } // Use transform for smoother movement noBtn.style.transform = `translate(${x}px, ${y}px)`; // Show hint popup briefly if (popup) { popup.style.visibility = 'visible'; clearTimeout(moveNoButton._t); moveNoButton._t = setTimeout(() => (popup.style.visibility = 'hidden'), 1500); } } // Desktop hover noBtn.addEventListener('mouseover', moveNoButton); // Pointer down covers modern touch + mouse noBtn.addEventListener('pointerdown', (e) => { e.preventDefault(); moveNoButton(); }); // Older mobile fallback noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNoButton(); }, { passive: false }); // Fallback on click noBtn.addEventListener('click', (e) => { e.preventDefault(); moveNoButton(); }); // Initial position after layout window.requestAnimationFrame(moveNoButton); })(); // ---------------- Success swap (Home page only) ---------------- function showSuccess(){ const main = document.getElementById('mainContainer'); const success = document.getElementById('successCard'); if(main && success){ main.style.display='none'; success.style.display='block'; } } // ---------------- Countdown (Countdown page only) ---------------- function startCountdown(){ const el = document.getElementById('countdown'); if(!el) return; function nextValentines(){ const now = new Date(); let year = now.getFullYear(); const target = new Date(year, 1, 14, 0, 0, 0); // Feb = 1 return (target < now) ? new Date(year + 1, 1, 14, 0, 0, 0) : target; } let target = nextValentines(); function tick(){ const now = new Date(); const diff = Math.max(0, target - now); const s = Math.floor(diff/1000)%60; const m = Math.floor(diff/1000/60)%60; const h = Math.floor(diff/1000/60/60)%24; const d = Math.floor(diff/1000/60/60/24); el.querySelector('#d').textContent = d; el.querySelector('#h').textContent = h; el.querySelector('#m').textContent = m; el.querySelector('#s').textContent = s; } tick(); setInterval(tick, 1000); } startCountdown(); 
